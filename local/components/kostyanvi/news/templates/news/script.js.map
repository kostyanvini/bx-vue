{"version":3,"file":"script.js","sources":["vue/src/components/News.vue","vue/src/components/NewsDetail.vue","vue/src/router.js","vue/src/store.js","vue/src/components/App.vue","vue/src/main.js"],"sourcesContent":["<template>\r\n    <div class=\"news\">\r\n        <div class=\"news__item\" v-for=\"el in news\" :key=\"el.ID\">\r\n            <div class=\"news__item-image\">\r\n                <img :src=\"el.PREVIEW_PICTURE.SRC\" :alt=\"el.PREVIEW_PICTURE.ALT\">\r\n            </div>\r\n            <div class=\"news__item-info\">\r\n                <a href=\"javascript:void(0)\" @click=\"$router.push(el.ID)\" class=\"news__item-title\">\r\n                    {{ el.NAME}}\r\n                </a>\r\n                <div class=\"news__item-text\" v-html=\"el.PREVIEW_TEXT\"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: 'News',\r\n    data() {\r\n        return {\r\n            news: []\r\n        }\r\n    },\r\n    created() {\r\n        if (this.$store.state.news.length) {\r\n            this.news = this.$store.state.news;\r\n        } else {\r\n            BX.ajax.runComponentAction('kostyanvi:news', 'getAllNews', {\r\n                    mode: 'class',\r\n                    data: {},\r\n                }\r\n            ).then((responce => {\r\n                try {\r\n                    const news  = JSON.parse(responce.data);\r\n                    this.news = news;\r\n                    this.$store.commit('setAllNews', news);\r\n                } catch (e) {\r\n                    console.warn('Не удалось получить данные');\r\n                    this.news = [];\r\n                }\r\n            }));\r\n        }\r\n    },\r\n    mounted() {\r\n\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.news {\r\n    &__item {\r\n        display: flex;\r\n\r\n        &:not(:last-child) {\r\n            margin-bottom: 20px;\r\n        }\r\n\r\n        &-image {\r\n            max-width: 100px;\r\n            margin-right: 20px;\r\n\r\n            img {\r\n                width: 100%;\r\n            }\r\n        }\r\n\r\n        &-title {\r\n            font-size: 20px;\r\n            line-height: 24px;\r\n            margin-bottom: 20px;\r\n            display: block;\r\n        }\r\n\r\n        &-text {\r\n            font-size: 16px;\r\n        }\r\n    }\r\n}\r\n</style>","<template>\r\n    <div class=\"detail-news\">\r\n        <div v-if=\"isLoaded\" class=\"loader\">Loading...</div>\r\n        <div v-else>\r\n            <router-link to=\"/\" class=\"rollback\">Go back</router-link>\r\n            <div class=\"detail-news__info\">\r\n                <div class=\"detail-news__info-name\">\r\n                    {{ newsDetailInfo.NAME }}\r\n                </div>\r\n                <div class=\"detail-news__info-text\" v-html=\"newsDetailInfo.DETAIL_TEXT\"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data() {\r\n        return {\r\n            isLoaded: true,\r\n            newsDetailInfo: {}\r\n        }\r\n    },\r\n    created() {\r\n        if (this.$store.state.newsCache[+this.$route.params.id]) {\r\n            this.newsDetailInfo = this.$store.state.newsCache[+this.$route.params.id];\r\n        } else {\r\n            BX.ajax.runComponentAction('kostyanvi:news', 'getNewsByID', {\r\n                    mode: 'class',\r\n                    data: {\r\n                        id: +this.$route.params.id\r\n                    },\r\n                }\r\n            ).then((responce => {\r\n                try {\r\n                    const result = JSON.parse(responce.data);\r\n                    this.newsDetailInfo = result;\r\n                    this.$store.commit('registerNewNewsCache', result);\r\n                } catch (e) {\r\n                    console.warn('Не удалось получить данные');\r\n                    this.newsDetailInfo = {};\r\n                }\r\n            }));\r\n        }\r\n        // Имитация загрузки\r\n        setTimeout(() => this.isLoaded = 0, 500);\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.detail-news {\r\n    .rollback {\r\n        margin-bottom: 20px;\r\n        font-size: 24px;\r\n        line-height: 26px;\r\n        text-decoration: none;\r\n        display: block;\r\n    }\r\n\r\n    &__info {\r\n        &-name {\r\n            margin-bottom: 20px;\r\n            font-size: 30px;\r\n            line-height: 36px;\r\n        }\r\n\r\n        &-text {\r\n            font-size: 18px;\r\n        }\r\n    }\r\n}\r\n</style>","import {VueRouter} from 'ui.vue';\r\nimport News from \"./components/News.vue\";\r\nimport NewsDetail from \"./components/NewsDetail.vue\";\r\n\r\nconst routes = [\r\n\t{\r\n\t\tpath: '/',\r\n\t\tcomponent: News\r\n\t},\r\n\t{\r\n\t\tpath: '/:id',\r\n\t\tcomponent: NewsDetail\r\n\t}\r\n]\r\n\r\nconst router = VueRouter.create({\r\n\tmode: 'history',\r\n\troutes,\r\n\tbase: '/news/'\r\n});\r\n\r\n\r\nexport default router;","import {Vuex} from 'ui.vue.vuex';\r\n\r\nconst store = Vuex.createStore({\r\n\tstate: {\r\n\t\tnewsCache: {},\r\n\t\tnews: []\r\n\t},\r\n\tmutations: {\r\n\t\tregisterNewNewsCache(store, newValue) {\r\n\t\t\tstore.newsCache[newValue.ID] = newValue;\r\n\t\t},\r\n\t\tsetAllNews(store, news) {\r\n\t\t\tstore.news = news;\r\n\t\t}\r\n\t}\r\n});\r\n\r\nexport default store;","<template>\r\n    <router-view></router-view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: 'App'\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\r\n</style>","import {BitrixVue} from 'ui.vue';\r\nimport router from \"./router.js\";\r\nimport store from \"./store\";\r\n\r\nimport App from \"./components/App.vue\";\r\n\r\nexport function init(node) {\r\n\treturn BitrixVue.createApp({\r\n\t\trouter,\r\n\t\tstore,\r\n\t\trender: h => h(App)\r\n\t})\r\n\t\t.mount(node);\r\n}"],"names":["VueRouter","Vuex","BitrixVue"],"mappings":"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"}